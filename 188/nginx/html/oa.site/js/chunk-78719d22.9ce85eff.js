(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78719d22"],{"680c":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return s});var r=a("b775");function n(e){return Object(r["b"])({url:"/SEMAccountNew/SetEmployee",method:"get",params:e})}function o(e){return Object(r["b"])({url:"/SEMAccountNew",method:"get",params:e})}function s(e){return Object(r["b"])({url:"/SEMAccountNew/Colunms",method:"get",params:e})}},"6ad9":function(e,t,a){},"98bc":function(e,t,a){"use strict";var r=a("6ad9"),n=a.n(r);n.a},b35f:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/crmClass",method:"get",params:e})}},b71d:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/OldEmployee/GetEmployeeList",method:"get",params:e})}},f989:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"components-form-demo-advanced-search"}},[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.form},on:{submit:e.handleSearch}},[a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"账户状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("暂停")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"2"}},[e._v("异常")])],1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"选择媒体"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(21446)}},model:{value:e.queryParam.mediaId,callback:function(t){e.$set(e.queryParam,"mediaId",t)},expression:"queryParam.mediaId"}},e._l(e.pageData.crm21446,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"媒体产品"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(22643)}},model:{value:e.queryParam.MediaProduct,callback:function(t){e.$set(e.queryParam,"MediaProduct",t)},expression:"queryParam.MediaProduct"}},e._l(e.pageData.crm22643,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"账户用途"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(20337)}},model:{value:e.queryParam.UsageId,callback:function(t){e.$set(e.queryParam,"UsageId",t)},expression:"queryParam.UsageId"}},e._l(e.pageData.crm20337,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"梯队"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(22625)}},model:{value:e.queryParam.TeamId,callback:function(t){e.$set(e.queryParam,"TeamId",t)},expression:"queryParam.TeamId"}},e._l(e.pageData.crm22625,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"业务团队"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(22547)}},model:{value:e.queryParam.ServiceId,callback:function(t){e.$set(e.queryParam,"ServiceId",t)},expression:"queryParam.ServiceId"}},e._l(e.pageData.crm22547,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"服务标识"},on:{dropdownVisibleChange:function(t){return e.loadSelectDataCrmClass(20025)}},model:{value:e.queryParam.nexId,callback:function(t){e.$set(e.queryParam,"nexId",t)},expression:"queryParam.nexId"}},e._l(e.pageData.crm20025,function(t){return a("a-select-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1),a("a-button",{style:{marginLeft:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("搜索")]),a("a-button",{style:{marginLeft:"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)],1),a("s-table",{ref:"table",attrs:{orignColumns:e.columns,data:e.loadData,scroll:{x:110},pageSize:20,bordered:"",size:"middle"},scopedSlots:e._u([{key:"notConnectCountRatio",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:5,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"statusName",fn:function(t,r){return a("span",{staticClass:"table-operation"},[e._v("\n      "+e._s(t)+"\n      "),1==r.status?a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.setApiStatus(r,0)}}},[e._v("暂停")]):2==r.status?a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.setApplyStatus(r)}}},[e._v("申请")]):a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.setApiStatus(r,1)}}},[e._v("启用")]),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("router-link",{attrs:{to:{path:"/SEM/Account/"+r.accountId+"/Error",query:{accountId:r.accountId,title:"异常["+r.accountId+"]详情"}}}},[e._v("异常信息查看")])],1),a("a-menu-item",[a("router-link",{attrs:{to:{path:"/SEM/Account/"+r.accountId+"/ErrorApply",query:{accountId:r.accountId,title:"启用["+r.accountId+"]申请"}}}},[e._v("启用申请")])],1),a("a-menu-item",{on:{click:function(t){return e.setApplyStatus(r)}}},[e._v("修改API配置")]),a("a-menu-item",[a("a",{attrs:{type:"primary"},on:{click:function(t){return e.dropdownOpen(r,"employee")}}},[e._v("分配媒介人员")])])],1),a("a",{attrs:{href:"javascript:;"}},[e._v("\n          更多\n          "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)}}])}),a("a-drawer",{attrs:{title:"选择媒介人员",placement:"right",closable:!1,visible:e.pageVariable.employee},on:{close:function(){return e.pageVariable.employee=!1}}},[a("a-directory-tree",{attrs:{multiple:"",defaultExpandAll:"",autoExpandParent:!0,treeData:e.pageData.employeeData},on:{select:e.onSelectEmployee}})],1),a("a-drawer",{attrs:{title:"修改账户API配置信息",width:720,visible:e.pageVariable.accountAuth,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:function(){return e.pageVariable.accountAuth=!1}}},[a("a-form",{attrs:{form:e.form,layout:"vertical",hideRequiredMark:""}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Name"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"Please enter user name"}]}],expression:"['name', {\n                rules: [{ required: true, message: 'Please enter user name' }]\n              }]"}],attrs:{placeholder:"Please enter user name"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Url"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:"please enter url"}]}],expression:"['url', {\n                rules: [{ required: true, message: 'please enter url' }]\n              }]"}],staticStyle:{width:"100%"},attrs:{addonBefore:"http://",addonAfter:".com",placeholder:"please enter url"}})],1)],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Owner"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["owner",{rules:[{required:!0,message:"Please select an owner"}]}],expression:"['owner', {\n                rules: [{ required: true, message: 'Please select an owner' }]\n              }]"}],attrs:{placeholder:"Please a-s an owner"}},[a("a-select-option",{attrs:{value:"xiao"}},[e._v("Xiaoxiao Fu")]),a("a-select-option",{attrs:{value:"mao"}},[e._v("Maomao Zhou")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Type"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"Please choose the type"}]}],expression:"['type', {\n                rules: [{ required: true, message: 'Please choose the type' }]\n              }]"}],attrs:{placeholder:"Please choose the type"}},[a("a-select-option",{attrs:{value:"private"}},[e._v("Private")]),a("a-select-option",{attrs:{value:"public"}},[e._v("Public")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"Approver"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["approver",{rules:[{required:!0,message:"Please choose the approver"}]}],expression:"['approver', {\n                rules: [{ required: true, message: 'Please choose the approver' }]\n              }]"}],attrs:{placeholder:"Please choose the approver"}},[a("a-select-option",{attrs:{value:"jack"}},[e._v("Jack Ma")]),a("a-select-option",{attrs:{value:"tom"}},[e._v("Tom Liu")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"DateTime"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["dateTime",{rules:[{required:!0,message:"Please choose the dateTime"}]}],expression:"['dateTime', {\n                rules: [{ required: true, message: 'Please choose the dateTime' }]\n              }]"}],staticStyle:{width:"100%"},attrs:{getPopupContainer:function(e){return e.parentNode}}})],1)],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"Description"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"Please enter url description"}]}],expression:"['description', {\n                rules: [{ required: true, message: 'Please enter url description' }]\n              }]"}],attrs:{rows:4,placeholder:"please enter url description"}})],1)],1)],1)],1),a("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},[a("a-button",{style:{marginRight:"8px"},on:{click:function(){return e.pageVariable.accountAuth=!1}}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.setAccountAuth}},[e._v("提交")])],1)],1)],1)},n=[],o=a("bd86"),s=a("2af9"),c=a("b71d"),l=a("680c"),i=a("b35f"),u={name:"clue-out-txid-list",components:{STable:s["q"],Ellipsis:s["g"]},data:function(){var e=this;return{pageVariable:{employee:!1,accountAuth:!1},pageData:{thisAccount:{},employeeData:[],crm21446:[],crm22643:[],crm20337:[],crm22625:[],crm22547:[],crm20025:[]},form:this.$form.createForm(this),queryParam:{},columns:[],loadData:function(t){return Object(l["b"])(Object.assign(t,e.queryParam)).then(function(e){return e})},defaultDate:[]}},watch:Object(o["a"])({},"pageVariable.employee",function(e){1==e&&this.getMeijie()}),created:function(){var e=this;Object(l["c"])().then(function(t){t.success&&(e.columns=t.data)})},computed:{},methods:{setAccountAuth:function(e){console.log("提交api表单",e)},dropdownOpen:function(e,t){this.pageData.thisAccount=e,this.pageVariable[t]=!0},openNotificationWithIcon:function(e,t){this.$notification[e]({message:"操作提醒",description:t})},onSelectEmployee:function(e){var t=this,a=t.pageData.thisAccount;this.$confirm({title:"确认选择【"+t.pageData.employeeData.filter(function(t){return t.key==e[0]})[0].title+"】么？",content:"来自账户："+a.accountName,okText:"确认",cancelText:"取消",maskClosable:!0,onOk:function(r){Object(l["a"])({AccountMasterIn:e[0],AccountId:a.accountId}).then(function(e){e.success?(t.openNotificationWithIcon("success",e.msg),t.pageVariable.employee=!1,t.$refs.table.refresh(!0)):t.openNotificationWithIcon("error",e.msg),r()})}})},getMeijie:function(){var e=this;0==this.pageData.employeeData.length&&Object(c["a"])({DepartMent:"42|29",EIds:"1638|1650|1655"}).then(function(t){e.pageData.employeeData=t.data})},setApiStatus:function(e,t){console.log(e,t)},setApplyStatus:function(e){this.pageData.thisAccount=e,this.pageVariable.accountAuth=!0},loadSelectDataCrmClass:function(e){var t=this;0==this.pageData["crm"+e].length&&Object(i["a"])({ParentId:e}).then(function(a){a.data&&a.data.length>0&&(t.pageData["crm"+e]=a.data)})},handleSearch:function(e){e.preventDefault(),this.form.validateFields(function(e,t){console.log("error",e),console.log("Received values of form: ",t)})},handleSearchKeyword:function(e){this.handleSearchKeywordByType(e,1)},handleSearchQuery:function(e){this.handleSearchKeywordByType(e,2)}}},d=u,p=(a("98bc"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports}}]);