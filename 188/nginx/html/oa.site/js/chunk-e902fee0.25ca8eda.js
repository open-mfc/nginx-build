(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e902fee0"],{"10f8":function(t,a,e){"use strict";e.d(a,"a",function(){return n});var r=e("b775");function n(t){return Object(r["b"])({url:"/brand",method:"get",params:t})}},"49f6":function(t,a,e){"use strict";var r=e("96a0"),n=e.n(r);n.a},"96a0":function(t,a,e){},d9c4:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-header-index-wide"},[e("a-card",{attrs:{loading:t.loading,bordered:!1,"body-style":{padding:"0"}}},[e("div",{staticClass:"salesCard"},[e("a-tabs",{attrs:{"default-active-key":"1",size:"large","tab-bar-style":{marginBottom:"24px",paddingLeft:"16px"}}},[e("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[e("a-auto-complete",{attrs:{placeholder:"输入品牌名称"},on:{search:t.handleSearchBrand},model:{value:t.queryParam.brand,callback:function(a){t.$set(t.queryParam,"brand",a)},expression:"queryParam.brand"}},[e("template",{slot:"dataSource"},t._l(t.brandSource,function(a){return e("a-select-option",{key:a.brandId+""},[t._v(t._s(a.brandName))])}),1)],2),e("div",{staticClass:"extra-item"},[e("a",{on:{click:function(){return t.defaultDate=t.generatorDate(-1,new Date(t.queryParam.startTime))}}},[t._v("上一天")]),e("a",{on:{click:function(){return t.defaultDate=t.generatorDate(1,new Date(t.queryParam.endTime))}}},[t._v("下一天")]),e("a",{on:{click:function(){return t.defaultDate=t.generatorDate(-1)}}},[t._v("昨天")]),e("a",{on:{click:function(){return t.defaultDate=t.generatorDate(-7)}}},[t._v("近一周")]),e("a",{on:{click:function(){return t.defaultDate=t.generatorDate(-30)}}},[t._v("近一月")])]),e("a-range-picker",{style:{width:"256px"},model:{value:t.defaultDate,callback:function(a){t.defaultDate=a},expression:"defaultDate"}})],1),e("a-tab-pane",{key:"1",attrs:{loading:"true",tab:"品牌线索"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[e("chart-card",{attrs:{loading:t.loading,title:"线索总数",total:t._f("NumberFormat")(t.sumXCount(t.miniChartData.totalCount))}},[e("a-tooltip",{attrs:{slot:"action",title:"当前指定时间总量，上期：比当前时间小"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",[e("mini-area",{attrs:{chartData:t.miniChartData.totalCount}})],1),e("template",{slot:"footer"},[t._v("\n                  上期\n                  "),e("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t._f("NumberFormat")(t.sumXCount(t.miniPastChartData.totalCount))))]),e("trend",{attrs:{flag:t.getChainRadio(t.sumXCount(t.miniChartData.totalCount),t.sumXCount(t.miniPastChartData.totalCount))>0?"up":"down"}},[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("环比")]),t._v("\n                    "+t._s(t.getChainRadio(t.sumXCount(t.miniChartData.totalCount),t.sumXCount(t.miniPastChartData.totalCount)))+"%\n                  ")])],1)],2)],1),e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[e("chart-card",{attrs:{loading:t.loading,title:"发放线索数",total:t._f("NumberFormat")(t.sumXCount(t.miniChartData.downTotal))}},[e("a-tooltip",{attrs:{slot:"action",title:"当前指定时间总量，上期：比当前时间小"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",[e("mini-area",{attrs:{chartData:t.miniChartData.downTotal}})],1),e("template",{slot:"footer"},[t._v("\n                  上期\n                  "),e("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t._f("NumberFormat")(t.sumXCount(t.miniPastChartData.downTotal))))]),e("trend",{attrs:{flag:t.getChainRadio(t.sumXCount(t.miniChartData.downTotal),t.sumXCount(t.miniPastChartData.downTotal))>0?"up":"down"}},[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("环比")]),t._v("\n                    "+t._s(t.getChainRadio(t.sumXCount(t.miniChartData.downTotal),t.sumXCount(t.miniPastChartData.downTotal)))+"%\n                  ")])],1)],2)],1),e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[e("chart-card",{attrs:{loading:t.loading,title:"无效线索",total:t._f("NumberFormat")(t.sumXCount(t.miniChartData.invalidTotal))}},[e("a-tooltip",{attrs:{slot:"action",title:"当前指定时间总量，上期：比当前时间小"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",[e("mini-area",{attrs:{chartData:t.miniChartData.invalidTotal}})],1),e("template",{slot:"footer"},[t._v("\n                  上期\n                  "),e("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t._f("NumberFormat")(t.sumXCount(t.miniPastChartData.invalidTotal))))]),e("trend",{attrs:{flag:t.getChainRadio(t.sumXCount(t.miniChartData.invalidTotal),t.sumXCount(t.miniPastChartData.invalidTotal))>0?"up":"down"}},[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("环比")]),t._v("\n                    "+t._s(t.getChainRadio(t.sumXCount(t.miniChartData.invalidTotal),t.sumXCount(t.miniPastChartData.invalidTotal)))+"%\n                  ")])],1)],2)],1),e("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[e("chart-card",{attrs:{loading:t.loading,title:"无效反馈数",total:t._f("NumberFormat")(t.sumXCount(t.miniChartData.invalidFeeback))}},[e("a-tooltip",{attrs:{slot:"action",title:"当前指定时间总量，上期：比当前时间小"},slot:"action"},[e("a-icon",{attrs:{type:"info-circle-o"}})],1),e("div",[e("mini-area",{attrs:{chartData:t.miniChartData.invalidFeeback}})],1),e("template",{slot:"footer"},[t._v("\n                  上期\n                  "),e("span",{staticStyle:{"margin-right":"16px"}},[t._v(t._s(t._f("NumberFormat")(t.sumXCount(t.miniPastChartData.invalidFeeback))))]),e("trend",{attrs:{flag:t.getChainRadio(t.sumXCount(t.miniChartData.invalidFeeback),t.sumXCount(t.miniPastChartData.invalidFeeback))>0?"up":"down"}},[e("span",{attrs:{slot:"term"},slot:"term"},[t._v("环比")]),t._v("\n                    "+t._s(t.getChainRadio(t.sumXCount(t.miniChartData.invalidFeeback),t.sumXCount(t.miniPastChartData.invalidFeeback)))+"%\n                  ")])],1)],2)],1)],1)],1)],1)],1)]),e("div",{staticClass:"antd-pro-pages-dashboard-analysis-twoColLayout",class:t.isDesktop()?"desktop":""},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:18}},[e("a-card",{attrs:{loading:t.loading,bordered:!1,title:"平台占比"}},[e("a-dropdown",{attrs:{slot:"extra",trigger:["click"],placement:"bottomLeft"},slot:"extra"},[e("a",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[e("a-icon",{attrs:{type:"ellipsis"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{attrs:{href:"javascript:;"}},[t._v("操作一")])]),e("a-menu-item",[e("a",{attrs:{href:"javascript:;"}},[t._v("操作二")])])],1)],1),e("s-table",{ref:"nexTable",attrs:{orignColumns:t.otherParam.nexColunms,data:t.otherParam.nexList,bordered:"",size:"middle",showPagination:!1},scopedSlots:t._u([{key:"notConnectCountRatio",fn:function(a){return e("span",{},[e("ellipsis",{attrs:{length:5,tooltip:""}},[t._v(t._s(a))])],1)}}])})],1)],1),e("a-col",{attrs:{span:6}},[e("div",[e("v-chart",{attrs:{"force-fit":!0,height:405,data:t.nexChartData,scale:{dataKey:"nex-percent",min:0,formatter:".0%"}}},[e("v-tooltip",{attrs:{showTitle:!1,"data-key":"first*nex-percent"}}),e("v-axis"),e("v-pie",{attrs:{position:"nex-percent",color:"first",vStyle:t.pieStyle}}),e("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1)])],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:18}},[e("a-card",{attrs:{loading:t.loading,bordered:!1,title:"媒体占比"}},[e("a-dropdown",{attrs:{slot:"extra",trigger:["click"],placement:"bottomLeft"},slot:"extra"},[e("a",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[e("a-icon",{attrs:{type:"ellipsis"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{attrs:{href:"javascript:;"}},[t._v("操作一")])]),e("a-menu-item",[e("a",{attrs:{href:"javascript:;"}},[t._v("操作二")])])],1)],1),e("s-table",{ref:"mediaTable",attrs:{orignColumns:t.otherParam.mediaColunms,data:t.otherParam.mediaList,bordered:"",size:"middle",showPagination:!1},scopedSlots:t._u([{key:"notConnectCountRatio",fn:function(a){return e("span",{},[e("ellipsis",{attrs:{length:5,tooltip:""}},[t._v(t._s(a))])],1)}}])})],1)],1),e("a-col",{attrs:{span:6}},[e("div",[e("v-chart",{attrs:{"force-fit":!0,height:405,data:t.mediaChartData,scale:{dataKey:"media-percent",min:0,formatter:".0%"}}},[e("v-tooltip",{attrs:{showTitle:!1,"data-key":"first*media-percent"}}),e("v-axis"),e("v-legend",{attrs:{"data-key":"first"}}),e("v-pie",{attrs:{position:"media-percent",color:"first",vStyle:t.pieStyle}}),e("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1)])],1)],1)],1)},n=[],i=(e("7f7f"),e("456d"),e("ac6a"),e("28a5"),e("a481"),e("bd86")),o=e("2af9"),s=e("e01a"),u=e("10f8"),l=e("c1df"),m=e.n(l),d=e("ac0d"),c=e("ca00"),h=e("7104"),f={props:{},name:"Analysis",mixins:[d["c"]],components:{STable:o["q"],Ellipsis:o["g"],ChartCard:o["d"],MiniArea:o["i"],MiniBar:o["j"],MiniProgress:o["k"],RankList:o["o"],Bar:o["c"],Trend:o["u"],NumberInfo:o["m"],MiniSmoothArea:o["l"]},data:function(){var t=this;return{dateFormat:"YYYY-MM-DD",dateJsFormat:"yyyyMMdd",loading:!0,queryParam:{startTime:"",endTime:"",brand:""},otherParam:{sectionDay:-1,isRefreshData:!1,isMonitorTime:!1,startDayTime:"",endDayTime:"",isOneDayTime:!1,nexList:function(a){return Object(s["i"])(Object.assign(a,t.queryParam)).then(function(a){var e=(new h.View).source(a.data);return e.transform({type:"percent",field:"totalCount",dimension:"first",as:"nex-percent"}),t.nexChartData=e.rows,a})},nexColunms:[],mediaList:function(a){return Object(s["g"])(Object.assign(a,t.queryParam)).then(function(a){var e=(new h.View).source(a.data);return e.transform({type:"percent",field:"totalCount",dimension:"first",as:"media-percent"}),t.mediaChartData=e.rows,a})},mediaColunms:[]},miniChartData:{totalCount:[],downTotal:[],invalidTotal:[],invalidFeeback:[]},miniPastChartData:{totalCount:[],downTotal:[],invalidTotal:[],invalidFeeback:[]},brandSource:[],pieScale:[{dataKey:"percent",min:0,formatter:".0%"}],nexChartData:[],mediaChartData:[],pieStyle:{stroke:"#fff",lineWidth:1},defaultDate:[]}},watch:Object(i["a"])({defaultDate:function(t){if(0!=t.length)return this.queryParam.startTime=t[0].format(this.dateFormat),this.queryParam.endTime=t[1].format(this.dateFormat),this.queryParam.startTime==this.queryParam.endTime&&(this.otherParam.isOneDayTime=!0),void(this.otherParam.isMonitorTime&&this.initHandle(this.otherParam.sectionDay));delete this.queryParam.startTime,delete this.queryParam.endTime}},"queryParam.brand",function(t){this.initHandle(this.otherParam.sectionDay)}),beforeRouteEnter:function(t,a,e){e(function(a){a.otherParam.isMonitorTime=!1,a.init.call(a,t)}),e()},beforeRouteUpdate:function(t,a,e){this.otherParam.isMonitorTime=!1,this.init.call(this,t),e()},computed:{},methods:{moment:m.a,init:function(t){t.query.brandid&&(this.queryParam.brand=t.query.brandid,this.handleSearchBrand(t.query.title.replace("-线索分析",""))),this.defaultDate=this.generatorDate(-1)},generatorDate:function(t,a){a||(a=new Date),this.otherParam.sectionDay=t;var e=Object(c["b"])(t,a).split(",");return this.queryParam.startTime=e[0],this.queryParam.endTime=e[1],[this.moment(e[0],this.dateFormat),this.moment(e[1],this.dateFormat)]},initHandle:function(t){var a=this;this.otherParam.isMonitorTime=!0,Object.keys(this.miniChartData).forEach(function(t,e){a.miniChartData[t]=[]}),Object.keys(this.miniPastChartData).forEach(function(t,e){a.miniPastChartData[t]=[]}),this.loading=!1,0==this.otherParam.isRefreshData?(Object(s["h"])().then(function(t){t.success&&(t.data.filter(function(t){return"first"==t.dataIndex})[0].align="left",a.otherParam.nexColunms=t.data)}),Object(s["f"])().then(function(t){t.success&&(t.data.filter(function(t){return"first"==t.dataIndex})[0].align="left",a.otherParam.mediaColunms=t.data)})):(this.$refs.nexTable.refresh(!0),this.$refs.mediaTable.refresh(!0)),this.otherParam.isRefreshData=!0,this.otherParam.isOneDayTime?(Object(s["e"])(this.queryParam).then(function(t){a.miniDataArray(t.data,a.miniChartData,"vHour")}),this.getPastHourData(t)):(Object(s["d"])(this.queryParam).then(function(t){a.miniDataArray(t.data,a.miniChartData,"vTime")}),this.getPastDateData(t))},getChainRadio:function(t,a){return((t-a)/(a||1)*100).toFixed(2)},getPastHourData:function(t){var a=this,e=Object(c["b"])(-Math.abs(t),new Date(this.queryParam.startTime)).split(","),r={startTime:e[0],endTime:e[1]};Object(s["e"])(Object.assign({},this.queryParam,r)).then(function(t){a.miniDataArray(t.data,a.miniPastChartData,"vHour")})},getPastDateData:function(t){var a=this,e=Object(c["b"])(-Math.abs(t),new Date(this.queryParam.startTime)).split(","),r={startTime:e[0],endTime:e[1]};Object(s["d"])(Object.assign({},this.queryParam,r)).then(function(t){a.miniDataArray(t.data,a.miniPastChartData,"vTime")})},miniDataArray:function(t,a,e){t.forEach(function(t,e){a.totalCount.push({x:t.first,y:t.totalCount}),a.downTotal.push({x:t.first,y:t.downTotal}),a.invalidTotal.push({x:t.first,y:t.invalidTotal}),a.invalidFeeback.push({x:t.first,y:t.invalidFeeback})})},sumXCount:function(t){var a=0;return t.forEach(function(t,e){a+=t.y}),a},handleSearchBrand:function(t){var a=this,e=/[\u4E00-\u9FA5\uF900-\uFA2D]/,r=/[0-9]/;(e.test(t)||r.test(t))&&(e.test(t)&&(t=t.replace(/[0-9]/g,"").replace("[]","")),Object(u["a"])({BrandName:t}).then(function(t){a.brandSource=t.data.map(function(t){return{brandId:t.brandId,brandName:"["+t.brandId+"]"+t.name}})}))},timeOnChange:function(t,a){if(a&&(this.queryParam.KfTime=a.join(","),","!=this.queryParam.KfTime))return this.queryParam.startTime=a[0],void(this.queryParam.endTime=a[1]);delete this.queryParam.KfTime}}},p=f,C=(e("49f6"),e("2877")),b=Object(C["a"])(p,r,n,!1,null,"34a900aa",null);a["default"]=b.exports},e01a:function(t,a,e){"use strict";e.d(a,"e",function(){return n}),e.d(a,"g",function(){return i}),e.d(a,"f",function(){return o}),e.d(a,"i",function(){return s}),e.d(a,"h",function(){return u}),e.d(a,"b",function(){return l}),e.d(a,"a",function(){return m}),e.d(a,"d",function(){return d}),e.d(a,"c",function(){return c});var r=e("b775");function n(t){return Object(r["b"])({url:"/clueoutfeeback/GetHourCount",method:"get",params:t})}function i(t){return Object(r["b"])({url:"/clueoutfeeback/GetMediaCount",method:"get",params:t})}function o(t){return Object(r["b"])({url:"/clueoutfeeback/MediaColunms",method:"get",params:t})}function s(t){return Object(r["b"])({url:"/clueoutfeeback/GetNexCount",method:"get",params:t})}function u(t){return Object(r["b"])({url:"/clueoutfeeback/NexColunms",method:"get",params:t})}function l(t){return Object(r["b"])({url:"/clueoutfeeback/GetBrandCount",method:"get",params:t})}function m(t){return Object(r["b"])({url:"/clueoutfeeback/BrandColunms",method:"get",params:t})}function d(t){return Object(r["b"])({url:"/clueoutfeeback/GetDateCount",method:"get",params:t})}function c(t){return Object(r["b"])({url:"/clueoutfeeback/DateColunms",method:"get",params:t})}}}]);